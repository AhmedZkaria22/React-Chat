{"ast":null,"code":"import _regeneratorRuntime from\"E:/ITI/React/AZ Chat/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"E:/ITI/React/AZ Chat/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"E:/ITI/React/AZ Chat/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useRef,useState}from'react';import{auth,firestore}from'../Firebase/Firebase';import{useCollectionData}from'react-firebase-hooks/firestore';import firebase from'../Firebase/Firebase.js';import{FaLocationArrow}from'react-icons/fa';import ChatMessage from'./ChatMessage';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ChatRoom(){var dummy=useRef();var messagesRef=firestore.collection('messages');var query=messagesRef.orderBy('createdAt');var _useCollectionData=useCollectionData(query,{idField:'id'}),_useCollectionData2=_slicedToArray(_useCollectionData,1),messages=_useCollectionData2[0];var _useState=useState(''),_useState2=_slicedToArray(_useState,2),formValue=_useState2[0],setFormValue=_useState2[1];useEffect(function(){var btnStyleEl=document.querySelector(\".btnStyle\");var sginBtnEl=document.querySelector(\".sginBtn\");btnStyleEl.style.display='inline-block';console.log(btnStyleEl,sginBtnEl);},[]);var sendMessage=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var _auth$currentUser,uid,photoURL;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_auth$currentUser=auth.currentUser,uid=_auth$currentUser.uid,photoURL=_auth$currentUser.photoURL;_context.next=4;return messagesRef.add({text:formValue,createdAt:firebase.firestore.FieldValue.serverTimestamp(),uid:uid,photoURL:photoURL});case 4:setFormValue('');dummy.current.scrollIntoView({behavior:'smooth'});case 6:case\"end\":return _context.stop();}}},_callee);}));return function sendMessage(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"chatRoom\",children:[/*#__PURE__*/_jsxs(\"section\",{id:\"mainChat\",children:[messages&&messages.map(function(msg){return/*#__PURE__*/_jsx(ChatMessage,{message:msg},msg.id);}),/*#__PURE__*/_jsx(\"div\",{ref:dummy})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:sendMessage,children:[/*#__PURE__*/_jsx(\"input\",{value:formValue,onChange:function onChange(e){return setFormValue(e.target.value);},placeholder:\"say something nice\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:!formValue,children:/*#__PURE__*/_jsx(FaLocationArrow,{})})]})]});}export default ChatRoom;","map":{"version":3,"sources":["E:/ITI/React/AZ Chat/src/Components/ChatRoom.js"],"names":["React","useEffect","useRef","useState","auth","firestore","useCollectionData","firebase","FaLocationArrow","ChatMessage","ChatRoom","dummy","messagesRef","collection","query","orderBy","idField","messages","formValue","setFormValue","btnStyleEl","document","querySelector","sginBtnEl","style","display","console","log","sendMessage","e","preventDefault","currentUser","uid","photoURL","add","text","createdAt","FieldValue","serverTimestamp","current","scrollIntoView","behavior","map","msg","id","target","value"],"mappings":"8ZAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,MAA3B,CAAmCC,QAAnC,KAAmD,OAAnD,CACA,OAASC,IAAT,CAAeC,SAAf,KAAgC,sBAAhC,CACA,OAASC,iBAAT,KAAkC,gCAAlC,CACA,MAAOC,CAAAA,QAAP,KAAqB,yBAArB,CACA,OAASC,eAAT,KAAgC,gBAAhC,CACA,MAAOC,CAAAA,WAAP,KAAwB,eAAxB,C,wFAEA,QAASC,CAAAA,QAAT,EAAmB,CACf,GAAMC,CAAAA,KAAK,CAAGT,MAAM,EAApB,CACA,GAAMU,CAAAA,WAAW,CAAGP,SAAS,CAACQ,UAAV,CAAqB,UAArB,CAApB,CACA,GAAMC,CAAAA,KAAK,CAAGF,WAAW,CAACG,OAAZ,CAAoB,WAApB,CAAd,CAHe,uBAIIT,iBAAiB,CAACQ,KAAD,CAAQ,CAACE,OAAO,CAAE,IAAV,CAAR,CAJrB,0DAIRC,QAJQ,sCAKmBd,QAAQ,CAAC,EAAD,CAL3B,wCAKRe,SALQ,eAKGC,YALH,eAMflB,SAAS,CAAC,UAAM,CACd,GAAMmB,CAAAA,UAAU,CAAGC,QAAQ,CAACC,aAAT,CAAuB,WAAvB,CAAnB,CACA,GAAMC,CAAAA,SAAS,CAAGF,QAAQ,CAACC,aAAT,CAAuB,UAAvB,CAAlB,CACAF,UAAU,CAACI,KAAX,CAAiBC,OAAjB,CAA2B,cAA3B,CACAC,OAAO,CAACC,GAAR,CAAaP,UAAb,CAAyBG,SAAzB,EACD,CALQ,CAKN,EALM,CAAT,CAOA,GAAMK,CAAAA,WAAW,0FAAG,iBAAMC,CAAN,qJAClBA,CAAC,CAACC,cAAF,GADkB,kBAGQ1B,IAAI,CAAC2B,WAHb,CAGVC,GAHU,mBAGVA,GAHU,CAGLC,QAHK,mBAGLA,QAHK,uBAKZrB,CAAAA,WAAW,CAACsB,GAAZ,CAAgB,CACpBC,IAAI,CAAEjB,SADc,CAEpBkB,SAAS,CAAE7B,QAAQ,CAACF,SAAT,CAAmBgC,UAAnB,CAA8BC,eAA9B,EAFS,CAGpBN,GAAG,CAAHA,GAHoB,CAIpBC,QAAQ,CAARA,QAJoB,CAAhB,CALY,QAYlBd,YAAY,CAAC,EAAD,CAAZ,CAEAR,KAAK,CAAC4B,OAAN,CAAcC,cAAd,CAA6B,CAAEC,QAAQ,CAAE,QAAZ,CAA7B,EAdkB,sDAAH,kBAAXb,CAAAA,WAAW,4CAAjB,CAiBA,mBACE,aAAK,SAAS,CAAE,UAAhB,wBACE,iBAAS,EAAE,CAAC,UAAZ,WACGX,QAAQ,EAAIA,QAAQ,CAACyB,GAAT,CAAa,SAAAC,GAAG,qBAAI,KAAC,WAAD,EAA0B,OAAO,CAAEA,GAAnC,EAAkBA,GAAG,CAACC,EAAtB,CAAJ,EAAhB,CADf,cAEE,YAAK,GAAG,CAAEjC,KAAV,EAFF,GADF,cAME,cAAM,QAAQ,CAAEiB,WAAhB,wBACE,cAAO,KAAK,CAAEV,SAAd,CAAyB,QAAQ,CAAE,kBAACW,CAAD,QAAOV,CAAAA,YAAY,CAACU,CAAC,CAACgB,MAAF,CAASC,KAAV,CAAnB,EAAnC,CAAwE,WAAW,CAAC,oBAApF,EADF,cAEE,eAAQ,IAAI,CAAC,QAAb,CAAsB,QAAQ,CAAE,CAAC5B,SAAjC,uBAA4C,KAAC,eAAD,IAA5C,EAFF,GANF,GADF,CAaH,CAED,cAAeR,CAAAA,QAAf","sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\nimport { auth, firestore } from '../Firebase/Firebase';\r\nimport { useCollectionData } from 'react-firebase-hooks/firestore';\r\nimport firebase from '../Firebase/Firebase.js';\r\nimport { FaLocationArrow } from 'react-icons/fa';\r\nimport ChatMessage from './ChatMessage';\r\n\r\nfunction ChatRoom(){\r\n    const dummy = useRef();\r\n    const messagesRef = firestore.collection('messages');\r\n    const query = messagesRef.orderBy('createdAt');\r\n    const [messages] = useCollectionData(query, {idField: 'id'});\r\n    const [formValue, setFormValue] = useState('');\r\n    useEffect(() => {\r\n      const btnStyleEl = document.querySelector(\".btnStyle\");\r\n      const sginBtnEl = document.querySelector(\".sginBtn\");\r\n      btnStyleEl.style.display = 'inline-block';        \r\n      console.log( btnStyleEl, sginBtnEl );\r\n    }, []);\r\n  \r\n    const sendMessage = async(e) => {\r\n      e.preventDefault();\r\n  \r\n      const { uid, photoURL } = auth.currentUser;\r\n  \r\n      await messagesRef.add({\r\n        text: formValue,\r\n        createdAt: firebase.firestore.FieldValue.serverTimestamp(),\r\n        uid,\r\n        photoURL\r\n      });\r\n  \r\n      setFormValue('');\r\n  \r\n      dummy.current.scrollIntoView({ behavior: 'smooth' });\r\n    }\r\n  \r\n    return(\r\n      <div className={\"chatRoom\"}>\r\n        <section id=\"mainChat\">\r\n          {messages && messages.map(msg => <ChatMessage key={msg.id} message={msg} />)}\r\n          <div ref={dummy}></div>\r\n        </section>\r\n  \r\n        <form onSubmit={sendMessage}>\r\n          <input value={formValue} onChange={(e) => setFormValue(e.target.value)} placeholder=\"say something nice\" />\r\n          <button type=\"submit\" disabled={!formValue}><FaLocationArrow /></button>\r\n        </form>\r\n      </div>\r\n    )\r\n}\r\n\r\nexport default ChatRoom\r\n"]},"metadata":{},"sourceType":"module"}