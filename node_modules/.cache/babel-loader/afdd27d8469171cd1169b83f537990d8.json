{"ast":null,"code":"var _jsxFileName = \"E:\\\\ITI\\\\React\\\\AZ Chat\\\\src\\\\Components\\\\ChatRoom.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useRef, useState } from 'react';\nimport { auth, firestore } from '../Firebase/Firebase';\nimport { useCollectionData } from 'react-firebase-hooks/firestore';\nimport firebase from '../Firebase/Firebase.js';\nimport { FaLocationArrow } from 'react-icons/fa';\nimport ChatMessage from './ChatMessage';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction ChatRoom() {\n  _s();\n\n  const dummy = useRef();\n  const messagesRef = firestore.collection('messages');\n  const query = messagesRef.orderBy('createdAt').limit(25);\n  const [messages] = useCollectionData(query, {\n    idField: 'id'\n  });\n  const [formValue, setFormValue] = useState('');\n  useEffect(() => {\n    const btnStyleEl = document.querySelector(\".btnStyle\");\n    const sginBtnEl = document.querySelector(\".sginBtn\");\n    btnStyleEl.style.display = 'inline-block';\n    document.querySelector(\".AZChat .chatContainer .chatRoom\").style.backgroundColor = \"#ffffff\";\n    console.log(btnStyleEl, sginBtnEl);\n  }, []);\n\n  const sendMessage = async e => {\n    e.preventDefault();\n    const {\n      uid,\n      photoURL\n    } = auth.currentUser;\n    await messagesRef.add({\n      text: formValue,\n      createdAt: firebase.firestore.FieldValue.serverTimestamp(),\n      uid,\n      photoURL\n    });\n    setFormValue('');\n    dummy.current.scrollIntoView({\n      behavior: 'smooth'\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"section\", {\n      id: \"mainChat\",\n      children: [messages && messages.map(msg => /*#__PURE__*/_jsxDEV(ChatMessage, {\n        message: msg\n      }, msg.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 44\n      }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: dummy\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: sendMessage,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        value: formValue,\n        onChange: e => setFormValue(e.target.value),\n        placeholder: \"say something nice\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        disabled: !formValue,\n        children: /*#__PURE__*/_jsxDEV(FaLocationArrow, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 55\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n}\n\n_s(ChatRoom, \"w/omJkpymRsWwV2v3tuh5N/YjmU=\", false, function () {\n  return [useCollectionData];\n});\n\n_c = ChatRoom;\nexport default ChatRoom;\n\nvar _c;\n\n$RefreshReg$(_c, \"ChatRoom\");","map":{"version":3,"sources":["E:/ITI/React/AZ Chat/src/Components/ChatRoom.js"],"names":["React","useEffect","useRef","useState","auth","firestore","useCollectionData","firebase","FaLocationArrow","ChatMessage","ChatRoom","dummy","messagesRef","collection","query","orderBy","limit","messages","idField","formValue","setFormValue","btnStyleEl","document","querySelector","sginBtnEl","style","display","backgroundColor","console","log","sendMessage","e","preventDefault","uid","photoURL","currentUser","add","text","createdAt","FieldValue","serverTimestamp","current","scrollIntoView","behavior","map","msg","id","target","value"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\nimport { auth, firestore } from '../Firebase/Firebase';\r\nimport { useCollectionData } from 'react-firebase-hooks/firestore';\r\nimport firebase from '../Firebase/Firebase.js';\r\nimport { FaLocationArrow } from 'react-icons/fa';\r\nimport ChatMessage from './ChatMessage';\r\n\r\nfunction ChatRoom(){\r\n    const dummy = useRef();\r\n    const messagesRef = firestore.collection('messages');\r\n    const query = messagesRef.orderBy('createdAt').limit(25);\r\n    const [messages] = useCollectionData(query, {idField: 'id'});\r\n    const [formValue, setFormValue] = useState('');\r\n    useEffect(() => {\r\n      const btnStyleEl = document.querySelector(\".btnStyle\");\r\n      const sginBtnEl = document.querySelector(\".sginBtn\");\r\n      btnStyleEl.style.display = 'inline-block'; \r\n      document.querySelector(\".AZChat .chatContainer .chatRoom\").style.backgroundColor = \"#ffffff\";       \r\n      console.log( btnStyleEl, sginBtnEl );\r\n    }, []);\r\n  \r\n    const sendMessage = async(e) => {\r\n      e.preventDefault();\r\n  \r\n      const { uid, photoURL } = auth.currentUser;\r\n  \r\n      await messagesRef.add({\r\n        text: formValue,\r\n        createdAt: firebase.firestore.FieldValue.serverTimestamp(),\r\n        uid,\r\n        photoURL\r\n      });\r\n  \r\n      setFormValue('');\r\n  \r\n      dummy.current.scrollIntoView({ behavior: 'smooth' });\r\n    }\r\n  \r\n    return(\r\n      <>\r\n        <section id=\"mainChat\">\r\n          {messages && messages.map(msg => <ChatMessage key={msg.id} message={msg} />)}\r\n          <div ref={dummy}></div>\r\n        </section>\r\n  \r\n        <form onSubmit={sendMessage}>\r\n          <input value={formValue} onChange={(e) => setFormValue(e.target.value)} placeholder=\"say something nice\" />\r\n          <button type=\"submit\" disabled={!formValue}><FaLocationArrow /></button>\r\n        </form>\r\n      </>\r\n    )\r\n}\r\n\r\nexport default ChatRoom\r\n"]},"metadata":{},"sourceType":"module"}